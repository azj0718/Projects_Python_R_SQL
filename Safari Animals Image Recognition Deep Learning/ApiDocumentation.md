# API Documentation

## Species

### List Species

```
GET /api/v1/species/
```

List the species known to the model.

#### Response Data

| Field     | Type               | Summary                                       |
|-----------|--------------------|-----------------------------------------------|
| `status`  | `string`           | "ok" if the request complete without failure. |
| `species` | `Array of strings` | All species known to the model.               |

## Labels

### List Labels

```
GET /api/v1/labels/
```

List the individual animal labels for a given species.

#### Response Data

| Field    | Type               | Summary                                                                  |
|----------|--------------------|--------------------------------------------------------------------------|
| `status` | `string`           | "ok" if the request complete without failure.                            |
| `labels` | `Array of strings` | All individual animals of the given species that are known to the model. |

## Collections

A collection of images. Predictions and retraining will operate on all images in a collection.

### Data Types

#### Collection

*Object*

| Field  | Type     | Summary                                                |
|--------|----------|--------------------------------------------------------|
| `id`   | `string` | ID of the collection. This is generated by the server. |
| `name` | `string` | The name of the collection.                            |

### List Collections

```
GET /api/v1/collections/
```

List the existing image collections.

#### Response Data

*Object*

| Field         | Type                   | Summary                                       |
|---------------|------------------------|-----------------------------------------------|
| `status`      | `string`               | "ok" if the request complete without failure. |
| `collections` | `Array of Collections` | All existing collections.                     |

### Create a collection:

```
POST /api/v1/collections/
```

#### Request JSON Params

*Object*

| Field  | Type     | Summary                  |
|--------|----------|--------------------------|
| `name` | `string` | Name for the collection. |

#### Response Data

*Object*

| Field        | Type         | Summary                                       |
|--------------|--------------|-----------------------------------------------|
| `status`     | `string`     | "ok" if the request complete without failure. |
| `collection` | `Collection` | The newly created collection.                 |

## Images

### List Images

```
GET /api/v1/images/
```

List images in a collection.

#### Url Arguments

| Field          | Type     | Summary                                 |
|----------------|----------|-----------------------------------------|
| `collectionID` | `string` | Delete the images from this collection. |

#### Response Data

*Object*

| Field    | Type               | Summary                                       |
|----------|--------------------|-----------------------------------------------|
| `status` | `string`           | "ok" if the request complete without failure. |
| `images` | `Array of strings` | Path to each image in this collection.        |

### Upload Images

```
POST /api/v1/images/
```

Upload new images to a collection via multipart form data.

#### Url Arguments

| Field          | Type     | Summary                               |
|----------------|----------|---------------------------------------|
| `collectionID` | `string` | Upload the images to this collection. |

#### Response Data

*Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

### Delete Images

```
DELETE /api/v1/images/
```

#### Url Arguments

| Field          | Type     | Summary                                 |
|----------------|----------|-----------------------------------------|
| `collectionID` | `string` | Delete the images from this collection. |

Delete images from a collection.

#### JSON Request Params

*List of file names to delete.*

#### Response Data

*JSON Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

## Predictions

### Make Predictions

```
POST /api/v1/predictions
```

Make bounding box and individual animal predictions for a collection.

#### Url Arguments

| Field          | Type     | Summary                               |
|----------------|----------|---------------------------------------|
| `collectionID` | `string` | Make predictions for this collection. |

#### Response Data

*JSON Object*

| Field         | Type                   | Summary                                       |
|---------------|------------------------|-----------------------------------------------|
| `status`      | `string`               | "ok" if the request complete without failure  |
| `annotations` | `Array of Annotations` | The predicted annotations for the collection. |

## Annotations

### List Annotations

```
GET /api/v1/annotations
```

List annotations for a collection. If no predictions have been made, then this will return an empty list.

#### Url Arguments

| Field          | Type     | Summary                               |
|----------------|----------|---------------------------------------|
| `collectionID` | `string` | List annotations for this collection. |

#### Response Data

*JSON Object*

| Field         | Type                   | Summary                                       |
|---------------|------------------------|-----------------------------------------------|
| `status`      | `string`               | "ok" if the request complete without failure  |
| `annotations` | `Array of Annotations` | The predicted annotations for the collection. |

### Update Annotations

```
POST /api/v1/annotations
```

Update annotations for a collection.

#### Url Arguments

| Field          | Type     | Summary                               |
|----------------|----------|---------------------------------------|
| `collectionID` | `string` | Save annotations for this collection. |

#### Request Data

*JSON Array of Annotations*

#### Response Data

*JSON Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

## Retraining

### Start Retraining

```
POST /api/v1/retrain/start
```

#### Url Arguments

| Field          | Type     | Summary                                        |
|----------------|----------|------------------------------------------------|
| `collectionID` | `string` | Retrain using annotations for this collection. |

#### Response Data

*JSON Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

### Abort Retraining

```
POST /api/v1/retrain/abort
```

#### Url Arguments

| Field          | Type     | Summary                               |
|----------------|----------|---------------------------------------|
| `collectionID` | `string` | Abort retraining for this collection. |

#### Response Data

*JSON Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

### Get Retraining Status

```
GET /api/v1/retrain/status
```

#### Url Arguments

| Field          | Type            | Summary                                    |
|----------------|-----------------|--------------------------------------------|
| `collectionID` | `string`        | Get retraining status for this collection. |

#### Response Data

*JSON Object*

| Field    | Type            | Summary                                      |
|----------|-----------------|----------------------------------------------|
| `status` | `string`        | "ok" if the request complete without failure |
| `job`    | `RetrainStatus` | The retraining status.                       |

### Clear Retraining Status

```
DELETE /api/v1/retrain/status
```

#### Url Arguments

| Field          | Type     | Summary                                      |
|----------------|----------|----------------------------------------------|
| `collectionID` | `string` | Clear retraining status for this collection. |

#### Response Data

*JSON Object*

| Field    | Type     | Summary                                      |
|----------|----------|----------------------------------------------|
| `status` | `string` | "ok" if the request complete without failure |

### Get Retraining Logs

```
GET /api/v1/retrain/logs
```

#### Url Arguments

| Field          | Type     | Summary                                  |
|----------------|----------|------------------------------------------|
| `collectionID` | `string` | Get retraining logs for this collection. |

#### Response Data

*JSON Object*

| Field    | Type                | Summary                                      |
|----------|---------------------|----------------------------------------------|
| `status` | `string`            | "ok" if the request complete without failure |
| `logs`   | `Array of EventLog` | The event logs retraining event logs         |
